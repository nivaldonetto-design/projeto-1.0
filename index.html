<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dino Defesa Turbo ü¶ñ</title>
    <style>
        /* CSS para o estilo visual */
        body { 
            margin: 0; 
            background: #000; 
            overflow: hidden; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            color: white; 
            font-family: 'Courier New', Courier, monospace; 
        }
        canvas { 
            border: 3px solid #444; 
            background: #020205; 
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.3); 
        }
        #painel { 
            position: absolute; 
            top: 10px; 
            text-align: center; 
            pointer-events: none; 
        }
    </style>
</head>
<body>

    <div id="painel">
        <h2>Dino Defesa Turbo ü¶ñ</h2>
        <p>Setas (‚Üê ‚Üí) para mover | Espa√ßo para Atirar</p>
    </div>
    <canvas id="gameCanvas"></canvas>

<script>
    // --- 1. CONFIGURA√á√ÉO DO CANVAS ---
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 500;
    canvas.height = 700;

    // --- 2. VARI√ÅVEIS DO JOGO ---
    let jogoAtivo = true;
    let frames = 0;
    let pontuacao = 0;
    let teclas = {};

    // Objeto do Dino
    let dino = { 
        x: 230, y: 620, 
        largura: 45, altura: 45, 
        velocidade: 8, vidas: 3, 
        timerPoder: 0 
    };

    let tiros = [];
    let inimigos = [];
    let particulas = [];
    let powerUps = [];
    let estrelas = [];

    // Criar o fundo de estrelas
    for (let i = 0; i < 80; i++) {
        estrelas.push({ 
            x: Math.random() * canvas.width, 
            y: Math.random() * canvas.height, 
            raio: Math.random() * 1.5, 
            velocidade: Math.random() * 2 + 0.5 
        });
    }

    // --- 3. CONTROLES ---
    window.addEventListener("keydown", (e) => teclas[e.code] = true);
    window.addEventListener("keyup", (e) => teclas[e.code] = false);

    // --- 4. FUN√á√ÉO PARA DESENHAR O DINO (PIXEL ART) ---
    function desenharDino(x, y, tamanho, corCorpo) {
        const p = tamanho / 10; // Unidade de pixel proporcional
        ctx.fillStyle = corCorpo;

        // Cabe√ßa
        ctx.fillRect(x + p*4, y, p*5, p*3); 
        ctx.fillRect(x + p*8, y + p, p*2, p*1); // Nariz
        
        // Olho
        ctx.fillStyle = "white";
        ctx.fillRect(x + p*5, y + p, p, p);
        
        // Corpo e Cauda
        ctx.fillStyle = corCorpo;
        ctx.fillRect(x + p*2, y + p*3, p*5, p*4);
        ctx.fillRect(x, y + p*4, p*2, p*3); 
        
        // Patas
        ctx.fillRect(x + p*3, y + p*7, p*2, p*2);
        ctx.fillRect(x + p*6, y + p*7, p*2, p*2);
    }

    // --- 5. L√ìGICA DE ATUALIZA√á√ÉO ---
    function criarInimigo() {
        if (frames % 50 === 0) {
            let tipo = Math.random() > 0.8 ? "rapido" : "comum";
            inimigos.push({
                x: Math.random() * (canvas.width - 35),
                y: -40,
                largura: tipo === "rapido" ? 25 : 35,
                altura: tipo === "rapido" ? 25 : 35,
                velocidade: tipo === "rapido" ? 6 : 3,
                cor: tipo === "rapido" ? "#B200FF" : "#FF4444"
            });
        }
    }

    function atualizar() {
        if (!jogoAtivo) return;

        // Estrelas
        estrelas.forEach(est => {
            est.y += est.velocidade;
            if (est.y > canvas.height) est.y = 0;
        });

        // Movimento
        if (teclas["ArrowLeft"] && dino.x > 0) dino.x -= dino.velocidade;
        if (teclas["ArrowRight"] && dino.x < canvas.width - dino.largura) dino.x += dino.velocidade;

        if (dino.timerPoder > 0) dino.timerPoder--;

        // Atirar
        if (teclas["Space"] && frames % 12 === 0) {
            let corTiro = dino.timerPoder > 0 ? "#00FFFF" : "yellow";
            tiros.push({ x: dino.x + dino.largura/2, y: dino.y, vx: 0, vy: -12, cor: corTiro });
            if (dino.timerPoder > 0) {
                tiros.push({ x: dino.x + dino.largura/2, y: dino.y, vx: -3, vy: -10, cor: corTiro });
                tiros.push({ x: dino.x + dino.largura/2, y: dino.y, vx: 3, vy: -10, cor: corTiro });
            }
        }

        // Atualizar Tiros
        tiros.forEach((t, i) => {
            t.y += t.vy; t.x += t.vx;
            if (t.y < 0 || t.x < 0 || t.x > canvas.width) tiros.splice(i, 1);
        });

        // Inimigos e Colis√µes
        inimigos.forEach((inimigo, iIdx) => {
            inimigo.y += inimigo.velocidade;

            // Colis√£o com o Dino
            if (inimigo.x < dino.x + dino.largura && inimigo.x + inimigo.largura > dino.x &&
                inimigo.y < dino.y + dino.altura && inimigo.y + inimigo.altura > dino.y) {
                dino.vidas--;
                inimigos.splice(iIdx, 1);
                if (dino.vidas <= 0) jogoAtivo = false;
            }

            // Colis√£o Tiro -> Inimigo
            tiros.forEach((t, tIdx) => {
                if (t.x < inimigo.x + inimigo.largura && t.x + 4 > inimigo.x &&
                    t.y < inimigo.y + inimigo.altura && t.y + 10 > inimigo.y) {
                    pontuacao += 10;
                    if (Math.random() < 0.1) powerUps.push({ x: inimigo.x, y: inimigo.y });
                    inimigos.splice(iIdx, 1);
                    tiros.splice(tIdx, 1);
                }
            });

            if (inimigo.y > canvas.height) {
                inimigos.splice(iIdx, 1);
                dino.vidas--;
                if (dino.vidas <= 0) jogoAtivo = false;
            }
        });

        // PowerUps
        powerUps.forEach((pu, pIdx) => {
            pu.y += 2;
            if (pu.y + 15 > dino.y && pu.y < dino.y + dino.altura &&
                pu.x + 15 > dino.x && pu.x < dino.x + dino.largura) {
                dino.timerPoder = 300;
                powerUps.splice(pIdx, 1);
            }
        });
    }

    // --- 6. RENDERIZA√á√ÉO ---
    function desenhar() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Estrelas
        ctx.fillStyle = "white";
        estrelas.forEach(e => { ctx.beginPath(); ctx.arc(e.x, e.y, e.raio, 0, Math.PI*2); ctx.fill(); });

        if (!jogoAtivo) {
            ctx.fillStyle = "red"; ctx.font = "40px Courier New";
            ctx.fillText("GAME OVER", canvas.width/2 - 110, canvas.height/2);
            ctx.font = "20px Courier New";
            ctx.fillStyle = "white";
            ctx.fillText("Recarregue para jogar", canvas.width/2 - 120, canvas.height/2 + 40);
            return;
        }

        // Itens
        ctx.fillStyle = "#00FFFF";
        powerUps.forEach(pu => ctx.fillRect(pu.x, pu.y, 15, 15));

        // Tiros
        tiros.forEach(t => { ctx.fillStyle = t.cor; ctx.fillRect(t.x, t.y, 4, 10); });

        // Inimigos
        inimigos.forEach(ini => { ctx.fillStyle = ini.cor; ctx.fillRect(ini.x, ini.y, ini.largura, ini.altura); });

        // --- DESENHAR O DINO ---
        let corDino = dino.timerPoder > 0 ? "#00FFFF" : "#4CAF50"; 
        if (dino.timerPoder > 0) { ctx.shadowBlur = 15; ctx.shadowColor = "#00FFFF"; }
        
        desenharDino(dino.x, dino.y, dino.largura, corDino);
        
        ctx.shadowBlur = 0;

        // HUD
        ctx.fillStyle = "white"; ctx.font = "20px Courier New";
        ctx.fillText("Pontos: " + pontuacao, 20, 30);
        ctx.fillText("Vidas: " + "‚ù§Ô∏è".repeat(dino.vidas), 20, 60);
    }

    function loop() {
        atualizar();
        desenhar();
        criarInimigo();
        frames++;
        requestAnimationFrame(loop);
    }

    loop();
</script>
</body>
</html>
